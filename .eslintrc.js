
const ERROR = 2;
const WARN = 1;
const OFF = 0;

module.exports = {
	env: {
		browser: true,
		es6: true,
		node: true,
	},
	parser: 'babel-eslint',
	parserOptions: {
		ecmaFeatures: {
			experimentalObjectRestSpread: true,
			jsx: true,
			impliedStrict: true,
		},
		sourceType: 'module',
	},
	plugins: [
		'react',
		'babel',
	],
	settings: {
		react: {
			pragma: 'React',
		},
	},
	rules: {
		'no-await-in-loops': WARN,
		'no-compare-neg-zero': WARN,
		'no-cond-assign': ERROR,
		'no-console': OFF,
		'no-constant-condition': WARN,
		'no-control-regex': ERROR,
		'no-debugger': ERROR,
		'no-dupe-args': ERROR,
		'no-dupe-keys': ERROR,
		'no-duplicate-case': ERROR,
		'no-empty': ERROR, // force user to fill in a block statement. Some comment is enough, but at least it forces the programmer to think about what he's doing.
		'no-empty-character-class': ERROR,
		'no-ex-assign': ERROR,
		'no-extra-boolean-cast': WARN,
		'no-extra-parens': [ WARN, "all", { nestedBinaryExpressions: false, ignoreJSX: 'all' } ],
		'no-extra-semi': WARN,
		'no-func-assign': ERROR,
		'no-inner-declarations': ERROR,
		'no-invalid-regexp': ERROR,
		'no-irregular-whitespace': [ ERROR, {
			'skipStrings': true,
			'skipComments': false,
			'skipRegExps': true,
			'skipTemplates': true,
		} ],
		'no-obj-calls': ERROR,
		'no-unreachable': ERROR,
		'no-unsafe-finally': ERROR,
		'no-unsafe-negation': ERROR,
		'use-isnan': ERROR,
		'valid-typeof': ERROR,

		'accessor-pairs': OFF,
		'array-callback-return': ERROR,
		'block-scoped-var': ERROR,
		'class-methods-use-this': [ WARN, { 'exceptMethods': [ 'render', 'trash' ] } ],
		'complexity': [ ERROR, { 'max': 10 } ],
		'consistent-return': WARN,
		'curly': [ WARN, 'all' ],
		'default-case': WARN,
		'dot-location': [ ERROR, 'property' ],
		'dot-notation': OFF,
		'eqeqeq': [ WARN, 'always' ],
		'guard-for-in': ERROR,
		'no-alert': ERROR,
		'no-caller': ERROR,
		'no-case-declarations': ERROR,
		'no-div-regex': ERROR,
		'no-else-return': WARN,
		'no-empty-function': WARN,
		'no-empty-pattern': ERROR,
		'no-eq-null': WARN,
		'no-eval': ERROR,
		'no-extend-native': WARN,
		'no-extra-bind': WARN,
		'no-extra-label': ERROR,
		'no-fallthrough': WARN,
		'no-floating-decimal': ERROR,
		'no-global-assign': ERROR,
		'no-implicit-coercion': OFF, // !!obj is easier and better optimized than Boolean(something), same for all other options.
		'no-implicit-globals': ERROR,
		'no-implied-eval': ERROR,
		'no-invalid-this': WARN,
		'no-iterator': ERROR,
		'no-labels': ERROR, // was here before I got here, no hard feelings either way
		'no-lone-blocks': ERROR,
		'no-loop-func': WARN,
		'no-magic-numbers': OFF, // might want to be changed, but too convenient
		'no-multi-spaces': WARN,
		'no-multi-str': ERROR,
		'no-new': WARN,
		'no-new-func': ERROR,
		'no-new-wrappers': ERROR,
		'no-octal': WARN,
		'no-octal-escape': ERROR,
		'no-param-reassign': WARN,
		'no-proto': ERROR,
		'no-redeclare': ERROR,
		'no-restricted-properties': OFF, // turn on when we have objects which we do not want direct property access to
		'no-return-assign': ERROR,
		'no-return-await': WARN,
		'no-script-url': ERROR,
		'no-self-assign': ERROR,
		'no-self-compare': ERROR,
		'no-sequences': ERROR,
		'no-throw-literal': WARN,
		'no-unmodified-loop-condition': WARN,
		'no-unused-expressions': WARN,
		'no-unused-labels': WARN,

		'no-useless-call': ERROR,
		'no-useless-concat': ERROR,
		'no-useless-escape': ERROR,
		'no-useless-return': WARN,
		'no-void': ERROR,
		'no-warning-comments': WARN, // Warn on "t|odo", "f|ixme" and "xxx" at the start of comments.
		'no-with': ERROR,
		'prefer-promise-reject-errors': ERROR,
		'radix': [ ERROR, 'always' ],
		'require-await': WARN,
		'vars-on-top': OFF, // too much of an hassle in bigger code blocks
		'wrap-iife': [ ERROR, 'inside' ],
		'yoda': ERROR,

		'init-declarations': WARN,
		'no-catch-shadow': WARN,
		'no-delete-var': ERROR,
		'no-label-var': ERROR,
		'no-shadow': WARN,
		'no-shadow-restricted-names': ERROR,
		'no-undef': ERROR,
		'no-undef-init': ERROR,
		'no-undefined': ERROR,
		'no-use-before-define': ERROR,
		'no-unused-vars': WARN,

		// Stylistic things
		'block-spacing': ERROR,
		'brace-style': [ ERROR, '1tbs', { 'allowSingleLine': true } ],
		'comma-dangle': [ ERROR, {
			'arrays': 'always-multiline',
			'objects': 'always-multiline',
			'imports': 'only-multiline',
			'exports': 'only-multiline',
			'functions': 'ignore',
		} ],
		'comma-spacing': [ ERROR, { 'before': false, 'after': true } ],
		'comma-style': [ ERROR, 'last' ],
		'eol-last': [ ERROR, 'always' ],
		'func-call-spacing': [ ERROR, 'never' ],
		'func-name-matching': ERROR,
	    'indent': [ ERROR, 'tab' ],
		'key-spacing': [ ERROR, { 'beforeColon': false, 'afterColon': true, 'mode': 'minimum' } ],
		'keyword-spacing': [ ERROR, { 'before': true, 'after': true } ],
		'no-lonely-if': WARN,
		'no-mixed-spaces-and-tabs': [ ERROR, 'smart-tabs' ],
		'space-infix-ops': ERROR,

		// ES6+ features
		'arrow-spacing': [ ERROR, { 'before': true, 'after': true } ],
		'constructor-super': ERROR,
		'generator-star-spacing': [ ERROR, 'after' ],
		'no-class-assign': ERROR,
		'no-const-assign': ERROR,
		'no-dupe-class-members': ERROR,
		'no-duplicate-imports': ERROR,
		'no-this-before-super': ERROR,
		'no-useless-computed-key': ERROR,
		'no-useless-constructor': ERROR,
		'no-useless-rename': ERROR,
		'no-var': ERROR,
		'prefer-arrow-callback': WARN,
		'prefer-const': WARN,
		'prefer-rest-params': WARN,
		'prefer-spread': WARN,
		'symbol-description': ERROR,
		'yield-star-spacing': [ ERROR, 'after' ],

		// React JSX rules
		'react/no-deprecated': WARN,
		'react/no-did-mount-set-state': ERROR,
		'react/no-did-update-set-state': ERROR,
		'react/no-direct-mutation-state': ERROR,
		'react/no-is-mounted': ERROR,
		'react/no-multi-comp': ERROR,
		'react/no-render-return-value': ERROR,
		'react/no-string-refs': WARN,
		'react/react-in-jsx-scope': ERROR,
		'react/require-render-return': WARN,
		'react/self-closing-comp': WARN,
		'react/style-prop-object': ERROR,

		'react/jsx-boolean-value': [ ERROR, 'always' ],
		'react/jsx-closing-bracket-location': [ ERROR, 'after-props' ],
		'react/jsx-first-prop-new-line': [ ERROR, 'multiline' ],
		'react/jsx-indent': [ ERROR, 'tab' ],
		'react/jsx-indent-props': [ ERROR, 'tab' ],
		'react/jsx-key': ERROR,
		'react/jsx-max-props-per-line': [ WARN, { 'maximum': 6 } ],
		'react/jsx-no-duplicate-props': ERROR,
		'react/jsx-no-undef': ERROR,
		'react/jsx-pascal-case': WARN,
		'react/jsx-tag-spacing': [ WARN, {
			'closingSlash': 'never',
			'afterOpening': 'never',
			'beforeSelfClosing': 'always'
		} ],

		// React compatibility
		'react/jsx-uses-react': ERROR,
		'react/jsx-uses-vars':  ERROR,
	},
};
